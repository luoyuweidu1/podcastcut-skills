<!--
架构守护者：一旦本文件夹有任何变化（新增/删除/重命名文件），请更新此文件
-->

# 用户习惯

用户个人偏好，AI 审核时参考。

## 文件清单

| 文件 | 类型 | 内容 |
|------|------|------|
| 1-核心原则.md | 原则 | 删前保后 |
| 2-语气词检测.md | 偏好 | 嗯啊呃 + 删除边界 |
| 3-静音段处理.md | 阈值 | ≤0.5s忽略, 0.5-1s可选, >1s建议删 |
| 4-重复句检测.md | 偏好 | 相邻句子开头≥5字相同，删短的 |
| 5-卡顿词.md | 偏好 | 固定列表 + 任意相邻重复词 |
| 6-句内重复检测.md | 偏好 | 单词级(A+中间+A) + 短语级(≥4字重复) |
| 7-连续填充词.md | 偏好 | 相邻语气词 + 句首语气词串(≥3个) |
| 8-重说纠正.md | 偏好 | 部分重复、否定纠正、词被打断 |
| 9-残句检测.md | 偏好 | 话说一半被打断 |
| 10-内容分析方法论.md | 方法论 | 5a 段落级内容分析 |
| LLM精剪prompt模板.md | **LLM指引** | **5b LLM层的检测清单和prompt模板** |

## AI 审核顺序（按优先级）

1. **静音 >1s** → 建议删（按1秒格子拆分）
2. **残句** → 删（话说一半 + 静音）
3. **重复句** → 删短的（开头≥5字相同）
4. **句内重复** → 单词级 A+中间+A + 短语级 ≥4字重复
5. **卡顿词** → 删前面（固定列表 + 任意相邻重复词）
6. **重说纠正** → 删前面（部分重复、否定纠正、词被打断）
7. **语气词** → 标记待人工确认（嗯啊呃）

## 核心原则

**删前保后**：后说的通常更完整，删除前面保留后面。

## 架构：规则层 + LLM 层

Step 5b 精剪采用 hybrid 架构：

| 层 | 负责 | 输出 |
|---|---|---|
| **规则层** (run_fine_analysis.js) | 静音检测（需音频时间戳）、基础卡顿词（连续相同词 + 叠词/ABB豁免） | fine_analysis_rules.json |
| **LLM 层** (Claude 当前会话) | 句首填充词、重说纠正、残句、整句填充词、句内重复、连续填充词 | fine_analysis_llm.json |
| **合并** (merge_llm_fine.js) | LLM 文本标记 → 映射回词级时间戳 → 与规则层合并去重 | fine_analysis.json |

**为什么要 hybrid**：纯规则对"重说纠正"等需要语义理解的编辑类型存在天花板，漏检率高（dexter 样本 39% 漏检是重说纠正）。LLM 层补充语义分析能力。
